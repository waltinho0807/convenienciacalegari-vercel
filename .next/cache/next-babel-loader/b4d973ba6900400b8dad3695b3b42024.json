{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useEffect, useRef } from 'react';\nimport axios from 'axios';\nimport { Label, Checkbox, Popup } from 'semantic-ui-react';\nimport formatDate from '../../utils/formatDate';\nimport baseUrl from '../../utils/baseUrl';\n\nconst OrderStatus = ({\n  order\n}) => {\n  const [delivered, setDelivered] = React.useState(order.status === 'delivered');\n  const isFirstRun = useRef(true);\n  useEffect(() => {\n    if (isFirstRun.current) {\n      isFirstRun.current = false;\n      return;\n    }\n\n    updateStatus();\n  }, [delivered]);\n\n  const updateStatus = async () => {\n    const url = `${baseUrl}/api/orders`;\n    const payload = {\n      _id: order._id,\n      status: delivered ? \"delivered\" : \"pending\"\n    };\n    await axios.put(url, payload);\n  };\n\n  const handleChangeStatus = () => {\n    setDelivered(prevState => !prevState);\n  };\n\n  return __jsx(React.Fragment, null, __jsx(Label, {\n    color: \"blue\",\n    content: formatDate(order.createdAt)\n  }), __jsx(Popup, {\n    trigger: __jsx(Checkbox, {\n      toggle: true,\n      onChange: handleChangeStatus,\n      label: delivered ? \"Delivered\" : \"Pending\",\n      checked: delivered,\n      fitted: true\n    }),\n    header: \"Delivery Status\",\n    content: delivered ? \"Delivered\" : \"Pending\",\n    position: \"top center\",\n    on: ['hover']\n  }));\n};\n\nexport default OrderStatus;","map":null,"metadata":{},"sourceType":"module"}